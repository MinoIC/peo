<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="utf-8">
    <title>{{.webApplicationName}} 用户控制台</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {{template "tpls/perfectCSS.html" .}}
</head>

<body class="overflow-hidden">
{{template "tpls/navbar.html" .}}
<div id="overlay" class="transparent"></div>
<div id="wrapper" class="preload sidebar-mini">
    {{template "tpls/sidebar.html" .}}
    <!-- main-container -->
    <div id="main-container">
        <div class="padding-md">
            <div class="row">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4><strong>余额充值</strong></h4>
                    </div>
                    <div class="panel-body">
                        <div class="col-md-3">
                            <div class="section-header">
                                <h4>账户余额</h4>
                                <img src="../static/img/wallet1.png" style="width: auto;height: 120px" alt="">
                                <h2>{{.balance}} <small>CNY</small></h2>
                                <a class="btn-success btn btn-sm" href="/">购买套餐</a>
                            </div>
                        </div>
                        <div class="col-md-2 col-md-offset-1">
                            <div class="panel panel-default panel-stat1 bg-warning">
                                <a href="#RechargeByKey" data-toggle="tab">
                                    <div class="panel-body text-white">
                                        <div class="value">
                                            <svg t="1582901509056" class="icon" viewBox="0 0 1496 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="14312" width="48" height="48"><path d="M409.915077 269.312a78.532923 78.532923 0 0 0 0-110.355692l-1.024-1.024a76.8 76.8 0 0 0-109.331692 0L22.685538 437.405538a78.611692 78.611692 0 0 0 0 110.434462l276.873847 279.473231a76.8 76.8 0 0 0 109.331692 0l1.024-1.024a78.532923 78.532923 0 0 0 0-110.355693L243.396923 547.84a78.611692 78.611692 0 0 1 0-110.434462l166.518154-168.093538z m1064.014769 168.093538l-276.873846-279.47323a76.8 76.8 0 0 0-109.331692 0l-1.024 1.024a78.532923 78.532923 0 0 0 0 110.355692l166.596923 168.093538a78.611692 78.611692 0 0 1 0 110.434462l-166.596923 168.093538a78.532923 78.532923 0 0 0 0 110.355693l1.024 1.024a76.8 76.8 0 0 0 109.331692 0l276.873846-279.473231a78.611692 78.611692 0 0 0 0-110.434462zM1009.033846 110.907077l-398.729846 853.070769c-12.918154 26.860308-35.603692 60.022154-64.827077 60.022154h-1.575385c-56.792615 0-93.892923-77.193846-68.765538-129.260308L871.502769 49.624615c12.918154-26.781538 60.809846-47.734154 60.809846-47.734153V0c77.351385 0 101.769846 58.840615 76.642462 110.907077z" p-id="14313" fill="#ffffff"></path></svg>
                                        </div>
                                        <div class="title">
                                            <span class="m-left-xs"><strong>激活码</strong></span>
                                        </div>
                                    </div>
                                </a>
                            </div>
                        </div>
                        <div class="col-md-5  padding-md">
                            <div class="tab-content">
                                <div class="tab-pane fade active in" id="RechargeByKey">
                                    <form class="no-margin" data-validate="parsley" novalidate="" method="post" id="FormByKey">
                                        {{.xsrfData}}
                                        <div class="panel-heading">
                                            <h4>用激活码充值</h4>
                                            <p>您可以在淘宝或发卡平台购买到用于充值余额的激活码</p>
                                            <p>若充值后等待一分钟扔未到账，请联系网站管理员为您解决</p>
                                        </div>
                                        <div class="panel-body">
                                            <div class="form-group">
                                                <input id="keyString" name="keyString" type="text" placeholder="输入您购买到的激活码" class="form-control input-lg parsley-validated" data-required="true" autocomplete="off">
                                            </div><!-- /form-group -->
                                        </div>
                                        <div class="panel-footer text-right">
                                            <button type="button" class="btn btn-info btn-lg" onclick="$.get('/user-recharge/recharge_by_key?'+$('#FormByKey').serialize(),function(data) {
                                            console.log($('#FormByKey').serialize());
                                            if (data === 'SUCCESS'){
                                                alert('充值成功！请刷新查看余额！');
                                            }else{
                                                alert('充值失败！'+data);
                                            }
                                            parent.location.reload();
                                          })
                                        "><i class="fa fa-heart"></i> 充值</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
            <div class="row">
                <div class="panel panel-default table-responsive">
                    <div class="panel-heading">
                        充值记录
                        <span class="label label-info pull-right">{{.rechargeTimes}} 次充值</span>
                    </div>
                    <div class="padding-md clearfix">
                        <div id="dataTable_wrapper" class="dataTables_wrapper" role="grid">
                            <table class="table table-striped dataTable" id="dataTable"
                                   aria-describedby="dataTable_info">
                                <thead>
                                <tr role="row">
                                    <th class="ui-state-default" role="columnheader" tabindex="0"
                                        aria-controls="dataTable"
                                        rowspan="1" colspan="1" aria-sort="ascending"
                                        aria-label="No: activate to sort column descending" style="width: 100px;">
                                        <div class="DataTables_sort_wrapper">ID<span
                                                    class="DataTables_sort_icon css_right ui-icon ui-icon-triangle-1-n"></span>
                                        </div>
                                    </th>
                                    <th class="ui-state-default" role="columnheader" tabindex="0"
                                        aria-controls="dataTable"
                                        rowspan="1" colspan="1" aria-label="Price: activate to sort column ascending"
                                        style="width: 114px;">
                                        <div class="DataTables_sort_wrapper">充值方式<span
                                                    class="DataTables_sort_icon css_right ui-icon ui-icon-carat-2-n-s"></span>
                                        </div>
                                    </th>
                                    <th class="ui-state-default" role="columnheader" tabindex="0"
                                        aria-controls="dataTable"
                                        rowspan="1" colspan="1" aria-label="Product: activate to sort column ascending"
                                        style="width: 380px;">
                                        <div class="DataTables_sort_wrapper">代码<span
                                                    class="DataTables_sort_icon css_right ui-icon ui-icon-carat-2-n-s"></span>
                                        </div>
                                    </th>
                                    <th class="ui-state-default" role="columnheader" tabindex="0"
                                        aria-controls="dataTable"
                                        rowspan="1" colspan="1" aria-label="Quantity: activate to sort column ascending"
                                        style="width: 157px;">
                                        <div class="DataTables_sort_wrapper">金额<span
                                                    class="DataTables_sort_icon css_right ui-icon ui-icon-carat-2-n-s"></span>
                                        </div>
                                    </th>
                                    <th class="ui-state-default" role="columnheader" tabindex="0"
                                        aria-controls="dataTable"
                                        rowspan="1" colspan="1" aria-label="Sales: activate to sort column ascending"
                                        style="width: 116px;">
                                        <div class="DataTables_sort_wrapper">充值时间<span
                                                    class="DataTables_sort_icon css_right ui-icon ui-icon-carat-2-n-s"></span>
                                        </div>
                                    </th>
                                    <th class="ui-state-default" role="columnheader" tabindex="0"
                                        aria-controls="dataTable"
                                        rowspan="1" colspan="1" aria-label="Status: activate to sort column ascending"
                                        style="width: 152px;">
                                        <div class="DataTables_sort_wrapper">状态<span
                                                    class="DataTables_sort_icon css_right ui-icon ui-icon-carat-2-n-s"></span>
                                        </div>
                                    </th>
                                </tr>
                                </thead>
                                <tbody role="alert" aria-live="polite" aria-relevant="all">
                                {{range .rechargeLogs}}
                                    <tr class="odd">
                                        <td class="sorting_2">#{{.ID}}</td>
                                        <td class=" ">{{.Method}}</td>
                                        <td class=" ">{{.Code}}</td>
                                        <td class=" ">{{.Balance}}</td>
                                        <td class=" ">{{.Time}}</td>
                                        <td class=" ">{{.Status}}</td>
                                    </tr>
                                {{end}}
                                </tbody>
                            </table>
                        </div><!-- /.padding-md -->
                    </div>
                </div>
            </div>
        </div>
        <!-- /main-container -->
    </div><!-- /wrapper -->

    <a href="" id="scroll-to-top" class="hidden-print"><i class="fa fa-chevron-up"></i></a>
    <!-- Logout confirmation -->
    {{template "tpls/perfectJS.html" .}}
    <script src='../static/perfect/js/jquery.cookie.min.js'></script>
</body>
</html>
